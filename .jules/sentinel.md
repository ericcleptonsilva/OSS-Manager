## 2024-05-24 - Over-fetching and Client-side Authentication Logic
**Vulnerability:** In `services/parseService.ts`, the Parse API is queried without excluding sensitive fields (`adminEmail`, `adminPassword`, `allowedEmails`, `password`) in `fetchPublicData` and `fetchFullData`. Additionally, the login logic in `performCustomLogin` pulls down all Academies to iterate through their `allowedEmails` and `adminPassword` client-side instead of using a server-side query.
**Learning:** Fetching sensitive data even if it's "hidden" from the UI maps is insecure because the raw JSON response from the server can be inspected in the browser's Network tab. Furthermore, retrieving full database collections (like all Academies) to authenticate a single user client-side exposes credentials for every other user/academy and is highly inefficient.
**Prevention:** Always use `.exclude()` on Parse Queries to prevent sensitive fields from leaving the server. Move authentication validation to the server by using targeted queries (e.g., `equalTo('allowedEmails', email).equalTo('adminPassword', password)`) or Cloud Functions, never iterating over sensitive data arrays client-side.
